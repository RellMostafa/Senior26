<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game - Senior26</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/game-common.css">
    <style>
        canvas {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin: 2rem 0;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .score {
            font-size: 1.5rem;
            margin: 1rem 0;
            padding: 0.5rem 2rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border-radius: 50px;
            display: inline-block;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>
    <div class="particles-container"></div>
    
    <a href="../games.html" class="back-button">‚Üê Back to Games</a>

    <div class="game-container">
        <h1>Snake Game</h1>
        <div class="stats">
            <div class="score">Score: <span id="score">0</span></div>
        </div>
        <div class="game-play-area">
            <canvas id="snakeCanvas" width="500" height="500"></canvas>
        </div>
        <div class="controls-info">
            <p>Use arrow keys or WASD to control the snake</p>
            <p>Press Space to pause/resume</p>
        </div>
    </div>

    <script src="../js/particles.js"></script>
    <script>
        const canvas = document.getElementById('snakeCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        const GRID_SIZE = 20;
        const CELL_SIZE = canvas.width / GRID_SIZE;

        let snake = [{ x: 10, y: 10 }];
        let food = { x: 15, y: 15 };
        let dx = 1;
        let dy = 0;
        let score = 0;
        let gameLoop;
        let isPaused = false;

        function drawSnakeSegment(x, y, i, isHead) {
            const centerX = (x + 0.5) * CELL_SIZE;
            const centerY = (y + 0.5) * CELL_SIZE;
            const radius = CELL_SIZE / 2 - 2;
            
            // Create gradient for snake segments
            const gradient = ctx.createRadialGradient(
                centerX, centerY, 0,
                centerX, centerY, radius
            );

            // Rainbow effect with white core
            const hue = (180 + i * 10) % 360;
            gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            gradient.addColorStop(0.3, `hsla(${hue}, 100%, 70%, 0.8)`);
            gradient.addColorStop(1, `hsla(${hue}, 100%, 50%, 0.8)`);

            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fillStyle = gradient;
            ctx.fill();

            // Add glow effect
            ctx.shadowColor = `hsla(${hue}, 100%, 50%, 0.8)`;
            ctx.shadowBlur = 15;
            ctx.fill();
            ctx.shadowBlur = 0;

            // Draw eyes if it's the head
            if (isHead) {
                const eyeRadius = radius / 4;
                const eyeOffset = radius / 2;
                
                // Direction-based eye positioning
                let eyeX1 = centerX, eyeX2 = centerX;
                let eyeY1 = centerY, eyeY2 = centerY;
                
                if (dx === 1) { // Moving right
                    eyeX1 = eyeX2 = centerX + eyeOffset/2;
                    eyeY1 = centerY - eyeOffset;
                    eyeY2 = centerY + eyeOffset;
                } else if (dx === -1) { // Moving left
                    eyeX1 = eyeX2 = centerX - eyeOffset/2;
                    eyeY1 = centerY - eyeOffset;
                    eyeY2 = centerY + eyeOffset;
                } else if (dy === 1) { // Moving down
                    eyeY1 = eyeY2 = centerY + eyeOffset/2;
                    eyeX1 = centerX - eyeOffset;
                    eyeX2 = centerX + eyeOffset;
                } else { // Moving up
                    eyeY1 = eyeY2 = centerY - eyeOffset/2;
                    eyeX1 = centerX - eyeOffset;
                    eyeX2 = centerX + eyeOffset;
                }

                // Draw eyes
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.arc(eyeX1, eyeY1, eyeRadius, 0, Math.PI * 2);
                ctx.arc(eyeX2, eyeY2, eyeRadius, 0, Math.PI * 2);
                ctx.fill();

                // Draw pupils
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(eyeX1, eyeY1, eyeRadius/2, 0, Math.PI * 2);
                ctx.arc(eyeX2, eyeY2, eyeRadius/2, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function drawSnake() {
            // Draw body segments first
            for (let i = snake.length - 1; i > 0; i--) {
                drawSnakeSegment(snake[i].x, snake[i].y, i, false);
            }
            // Draw head last (on top)
            drawSnakeSegment(snake[0].x, snake[0].y, 0, true);
        }

        function drawFood() {
            const centerX = (food.x + 0.5) * CELL_SIZE;
            const centerY = (food.y + 0.5) * CELL_SIZE;
            const radius = CELL_SIZE / 2 - 2;
            
            // Pulsing animation
            const pulseScale = 1 + Math.sin(Date.now() / 200) * 0.1;
            
            // Draw glow
            ctx.shadowColor = 'rgba(255, 0, 0, 0.8)';
            ctx.shadowBlur = 20;
            
            // Main apple shape
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * pulseScale, 0, Math.PI * 2);
            ctx.fill();
            
            // Shine effect
            const gradient = ctx.createLinearGradient(
                centerX - radius, centerY - radius,
                centerX + radius, centerY + radius
            );
            gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0)');
            gradient.addColorStop(1, 'rgba(255, 0, 0, 0.5)');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * pulseScale, 0, Math.PI * 2);
            ctx.fill();
            
            // Reset shadow
            ctx.shadowBlur = 0;
            
            // Leaf
            ctx.fillStyle = '#0a0';
            ctx.beginPath();
            ctx.ellipse(
                centerX, centerY - radius * pulseScale,
                radius/3, radius/4,
                Math.PI/4, 0, Math.PI * 2
            );
            ctx.fill();
        }

        function moveSnake() {
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };
            
            if (head.x < 0) head.x = GRID_SIZE - 1;
            if (head.x >= GRID_SIZE) head.x = 0;
            if (head.y < 0) head.y = GRID_SIZE - 1;
            if (head.y >= GRID_SIZE) head.y = 0;

            if (head.x === food.x && head.y === food.y) {
                score += 10;
                scoreElement.textContent = score;
                food = {
                    x: Math.floor(Math.random() * GRID_SIZE),
                    y: Math.floor(Math.random() * GRID_SIZE)
                };
            } else {
                snake.pop();
            }

            // Check collision with self
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                gameOver();
                return;
            }

            snake.unshift(head);
        }

        function gameOver() {
            clearInterval(gameLoop);
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#ffffff';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Game Over!', canvas.width/2, canvas.height/2);
            ctx.font = '20px Arial';
            ctx.fillText('Press Space to restart', canvas.width/2, canvas.height/2 + 40);
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            moveSnake();
            drawFood();
            drawSnake();
        }

        function drawLogo() {
            // Draw large snake face logo
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const size = canvas.width * 0.4;
            
            // Snake head
            const gradient = ctx.createRadialGradient(
                centerX, centerY, 0,
                centerX, centerY, size
            );
            gradient.addColorStop(0, 'rgba(255, 255, 255, 0.8)');
            gradient.addColorStop(0.3, 'hsla(120, 100%, 70%, 0.8)');
            gradient.addColorStop(1, 'hsla(120, 100%, 50%, 0.8)');
            
            ctx.shadowColor = 'hsla(120, 100%, 50%, 0.8)';
            ctx.shadowBlur = 30;
            
            // Head shape
            ctx.beginPath();
            ctx.arc(centerX, centerY, size, 0, Math.PI * 2);
            ctx.fillStyle = gradient;
            ctx.fill();
            
            // Eyes
            const eyeSize = size * 0.2;
            ctx.fillStyle = 'white';
            ctx.beginPath();
            ctx.arc(centerX - size * 0.3, centerY - size * 0.1, eyeSize, 0, Math.PI * 2);
            ctx.arc(centerX + size * 0.3, centerY - size * 0.1, eyeSize, 0, Math.PI * 2);
            ctx.fill();
            
            // Pupils
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(centerX - size * 0.3, centerY - size * 0.1, eyeSize * 0.5, 0, Math.PI * 2);
            ctx.arc(centerX + size * 0.3, centerY - size * 0.1, eyeSize * 0.5, 0, Math.PI * 2);
            ctx.fill();
            
            // Tongue
            ctx.strokeStyle = 'red';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY + size * 0.3);
            ctx.lineTo(centerX, centerY + size * 0.5);
            ctx.lineTo(centerX - size * 0.1, centerY + size * 0.6);
            ctx.moveTo(centerX, centerY + size * 0.5);
            ctx.lineTo(centerX + size * 0.1, centerY + size * 0.6);
            ctx.stroke();
            
            // Text
            ctx.shadowBlur = 10;
            ctx.fillStyle = 'white';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Press Space to Start', centerX, centerY + size + 50);
            
            ctx.shadowBlur = 0;
        }

        function startGame() {
            snake = [{ x: 10, y: 10 }];
            food = {
                x: Math.floor(Math.random() * GRID_SIZE),
                y: Math.floor(Math.random() * GRID_SIZE)
            };
            dx = 1;
            dy = 0;
            score = 0;
            scoreElement.textContent = score;
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(update, 100);
            isPaused = false;
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                if (gameLoop) {
                    if (isPaused) {
                        gameLoop = setInterval(update, 100);
                        isPaused = false;
                    } else {
                        clearInterval(gameLoop);
                        gameLoop = null;
                        isPaused = true;
                    }
                } else {
                    startGame();
                }
                e.preventDefault();
            }

            const key = e.key.toLowerCase();
            if ((key === 'arrowup' || key === 'w') && dy !== 1) { dx = 0; dy = -1; }
            if ((key === 'arrowdown' || key === 's') && dy !== -1) { dx = 0; dy = 1; }
            if ((key === 'arrowleft' || key === 'a') && dx !== 1) { dx = -1; dy = 0; }
            if ((key === 'arrowright' || key === 'd') && dx !== -1) { dx = 1; dy = 0; }
        });

        drawLogo();
    </script>
</body>
</html>